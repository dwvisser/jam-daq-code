<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <TITLE>Online Sorting</TITLE>
   <LINK REL=STYLESHEET TYPE="text/css" HREF="../manualstyle.css" TITLE="Manual Style">
<meta name="Microsoft Border" content="none, default">
</HEAD>
<BODY>
<a name="top">
<H2>Online Sorting</H2>

<p>Setting up Jam to take data takes only a few easy steps:</p>

<OL>
<LI><A HREF="writesort.html">Write</a> a sort routine. 
A sort routine defines all the histograms and 
gates, and sorts each event. You will need a editor and Java compiler for this. The best approach, however, is to use an
  <a href="http://links.javalobby.org/Developer_Tools/index.html">
  integrated development environment</a>, such as <a href="http://www.eclipse.org/">Eclipse</a>.
</LI>

<LI>Start up Jam and make sure that the front end 
computer is on and running the correct software.</LI>


<LI><A HREF="#sorting">Setup</a> the sorting. Tell Jam which sorting
routine to use, how to name the event and histograms files and the 
paths to use to write out the events, hdf files, and console logs. 
</LI>
<LI><A HREF="#acquisition">Start</a> the acquisition. 
You may just view and sort events,
or to store data to disk, <a href="#beginrun">begin</a> a run.
</LI>

</OL>


<A NAME="sorting"><H3>Setup Online Sorting</H3></A>

<p>Open the <span CLASS=jammenu>Setup|Online</span> 
dialog box to set up online sorting. There are seven text fields you need to fill in. The three .class fields
are entered as Java class references.</p>
<ul>
	<li><span class=jamfield>Experiment Name</span> is used to name the data files. 
The event data and histogram files are named with the name of the experiment with the run number 
appended, e.g. <code>AlphaTest100.hdf</code> and <code>AlphaTest100.evn</code>. Make 
the name of the experiment descriptive.</li>
	<li><span class=jamfield>Sort File (.class)</span> is a sort routine that was written by the experimenter.</li>
	<li><span class=jamfield>Event input stream (.class)</span> is the class for interpreting the event data format.</li>
	<li><span class=jamfield>Event output stream (.class)</span> is not really used. (?)</li>
	<li><span class=jamfield>Path for Histograms</span> is the path for storing hdf files</li>
	<li><span class=jamfield>Path for Events</span> is the path for storing events files</li>
	<li><span class=jamfield>Path for Log Files</span> is the path for console log files</li>
</ul>

<A NAME="acquisition"><H3>Starting and stopping the acquistion system</H3>
<p>To start and stop the data acquisition without saving the events, 
use the menu items <span CLASS=jammenu>Control|start</span> and <span CLASS=jammenu>Control|stop</span>. 
If the data rate is slow, clicking <span CLASS=jammenu>Control|flush</span> instructs the front
end computer to send all data currently stored.</p>

<a name="beginrun"></a><H3>Running: taking event data</H3>
<p>Begin a run to save the event data. Open the <span class=jammenu>Control|Run...</span> dialog box to do this.
<span class=jambutton>Begin</span> will open a new event file and start acquisition. 
The event file will be create in the directory specified in the <span class=jammenu>Setup|Online</span>
 dialog box.
<span class=jambutton>End</span> will stop acquisition, close the event file, 
and write out a HDF file containing the histograms, gates, and scalers.
</p>

</BODY>
</HTML>
